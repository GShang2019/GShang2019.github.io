[{"title":"Chrome视频解析插件","url":"/2019/05/18/Chrome视频解析插件/","content":"\n> 我们在观看一些平台的视频资源时，比如优酷视频、腾讯视频、爱奇艺等等，通常都会需要VIP资格才能观看到更稀缺的视频，如何通过破解来实现免VIP观看呢？下面我们来看一看怎么用Chrome插件实现。\n## 视频解析网站\n> 我们找到一个视频解析的网站，其基本解析原理就是将需要VIP的视频播放网址复制到搜索框中，点击搜索后跳转到解析后的视频地址，进行播放。\n\n**如果把它做成在网页上直接通过右键点击就可以播放，岂不是更方便？**\n\n### 解析网站的工作原理\n通过搜索框复制粘贴网址，获取到需要解析的视频网址，点击搜索后，网址和一串URL合成新的网址，后台解析并打开。新网址格式具体为：\n\n```\nhttp://www.wq114.org/yun.php?url=需要VIP的视频网址\n```\n[点击打开解析网站](http://www.wq114.org/)\n## 制作chrome插件\n根据以上的分析，我们做插件只需要这几步来实现\n1. 获取当前页面的网址；\n2. 将网址与前缀URL组合在一起，构成解析格式；\n3. 右键点击时，提交组合后的网址，并打开新窗口播放解析视频。\n### 具体实现\n- manifest.json(配置文件)\n```\n{\n  \"update_url\": \"https://clients2.google.com/service/update2/crx\",\n\n  \"name\": \"视频解析\",\n  \"description\": \"通过右键解析当前需要VIP的视频资源\",\n  \"manifest_version\": 2,\n  \"version\": \"1.0.0\",\n  \"icons\":{\n\t\"16\":\"16.png\",\n\t\"48\":\"48.png\",\n\t\"128\":\"128.png\"\n  },\n  \"permissions\": [\"contextMenus\", \"tabs\"],\n  \"background\": {\"page\": \"background.html\"}\n}\n```\n注解：因为需要打开网页，和监测网页的网址，所以需要\n\n```\n \"permissions\": [\"contextMenus\", \"tabs\"]\n```\n- jx.js(脚本文件)\n\n\n```\nfunction jx(info, tab){\n       var url='';\nchrome.tabs.getSelected(function(tab) {\n    url=tab.url;\n\tvar open_url = \"http://www.wq114.org/yun.php?url=\" + url;\n\twindow.open(open_url);\n});\n\n}\nvar left_title =\"解析当前视频\";\nvar parent = chrome.contextMenus.create({\"title\": left_title,\"contexts\":[\"all\"],\"onclick\":jx});\n\n```\n注解：通过chrome内部的调用，由**tab.url**获取当前网址。构造**jx**函数，组合网址，最后利用**chrome.contextMenus.create**建立右键选项，其中**contexts**表示右键选项显示的条件，**all**表示任何情况下。，**onclick**表示点击后做的动作，直接调用了jx方法。\n- background.html(后台网页)\n```\n<script src=\"jx.js\"></script>\n```\n注解：background一直调用jx.js实现所需功能。\n\n## 打包成插件\n所有代码编写完后，资源如下：\n- 16.png\n- 48.png\n- 128.png\n- jx.js\n- background.html\n- manifest.json\n\n在浏览器插件管理中，选择开发者模式，打包扩展插件，得到可用的crx格式的chrome插件文件，将其拖拽到浏览器即可使用。\n\n[点击下载视频解析插件](https://share.weiyun.com/59Xzjb9)","tags":["chrome插件"],"categories":["web前端"]},{"title":"Hello World","url":"/2019/05/17/hello-world/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n"}]